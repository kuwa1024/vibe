# 書籍販売管理システムのAPI作成

## 1️⃣ ドメインのエンティティ・値オブジェクト

* **Book（書籍）**

  * ISBN（値オブジェクト）で一意管理
  * タイトル、価格（Money）、在庫数
* **Customer（顧客）**

  * 顧客ID、氏名、メールアドレスなど
* **Order（注文）**

  * 注文ID、注文日時、顧客ID
  * 注文アイテム（Book + 数量）
* **OrderItem（注文内商品）**

  * BookのISBN、数量

## 2️⃣ ビジネスルール（DDDで表現）

1. **在庫チェック**

   * 注文時に Book の在庫が十分でない場合は注文できない
   * 注文後は在庫を減らす
2. **注文単位のルール**

   * 注文は少なくとも1冊以上の商品を含む
   * 1回の注文で同じISBNはまとめる
3. **値オブジェクトの制約**

   * ISBN は必須で、フォーマットチェック可能
   * 価格（Money）は負の値を許さない
4. **注文のステータス管理**

   * 注文は作成時に「未発送」ステータス
   * 発送済みに変更可能（将来的に）
5. **予約注文（Optional）**

   * 発売前書籍は予約可能だが、在庫減算は発送時に実施
6. **合計金額計算**

   * Order が保持するアイテムの数量×価格の合計を常に計算できる
7. **キャンセル**

   * 出荷前なら注文キャンセル可能
   * キャンセル時は在庫を元に戻す
8. **在庫が0でない書籍は削除不可**
* 在庫数が0でない限り、書籍を削除することはできない。
